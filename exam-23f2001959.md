Perfect üëç
Below are **5 HARD-LEVEL, original TDS questions**.
These are **advanced**, reasoning-heavy, and suitable for **graded assignments** (not basic GA-level).

You can **directly paste these into your new `.md` file**.

---

# üî• HARD-LEVEL TDS QUESTIONS

---

## Question 1: FastAPI Dependency Caching & Request Scope

### Problem Statement

You are building a FastAPI application that connects to a database.

1. Create a dependency that returns a database session.
2. Ensure:

   * A **new session is created per request**
   * The session is **closed after the request completes**
3. Explain what happens if `@lru_cache` is mistakenly applied to this dependency.

### Expected Learning Outcome

* Dependency lifecycle
* Request vs application scope
* Resource cleanup in FastAPI

---

## Question 2: Git Rebase vs Merge in Collaborative Workflows

### Problem Statement

Two developers are working on the same feature branch.

1. Explain how **rebasing** differs from **merging** when synchronizing with `main`.
2. Given a scenario where the commit history must remain linear, justify which approach is better.
3. Describe a situation where rebasing can cause problems in shared branches.

### Expected Learning Outcome

* Advanced Git workflows
* Commit history management
* Collaboration pitfalls

---

## Question 3: Designing Idempotent REST APIs

### Problem Statement

Consider a REST API that processes financial transactions.

1. Explain what **idempotency** means in REST APIs.
2. Identify which HTTP methods should be idempotent and why.
3. Propose a strategy to make a `POST /payments` endpoint idempotent.

### Expected Learning Outcome

* REST constraints
* Reliability in distributed systems
* Safe API design

---

## Question 4: Docker Multi-Stage Builds for FastAPI

### Problem Statement

You are asked to reduce the image size of a FastAPI application.

1. Write a **multi-stage Dockerfile** that:

   * Builds dependencies in one stage
   * Copies only required artifacts into the final image
2. Explain how multi-stage builds improve security and performance.
3. Mention one drawback of this approach.

### Expected Learning Outcome

* Docker optimization
* Secure container practices
* Production deployment concepts

---

## Question 5: Server-Side Rate Limiting Design

### Problem Statement

A public API is experiencing abuse due to excessive requests.

1. Explain how **rate limiting** protects APIs.
2. Design a server-side rate limiting strategy using:

   * IP-based limits OR
   * Token-based limits
3. Discuss one limitation of implementing rate limiting at the application layer instead of a reverse proxy.

### Expected Learning Outcome

* API security
* Distributed system considerations
* Scalability trade-offs

---